version: '3'
services:
  proxy:
    build: .
    ports:
      - "443:443"
    volumes:
      - /etc/letsencrypt:/etc/letsencrypt
    environment:
      NODE_ENV: production
    depends_on:
      - one-api
    networks:
      - app-network

  one-api:
    image: justsong/one-api-en
    container_name: one-api
    restart: always
    environment:
      TZ: Asia/Shanghai
    volumes:
      - /home/ubuntu/data/one-api:/data
    expose:
      - "3000"
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
